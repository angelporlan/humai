<div class="settings-container">
    <div class="settings-header">
        <h2>Configuración</h2>
    </div>

    <div class="settings-content" *ngIf="!loading">
        <div class="settings-nav">
            <button class="nav-item" [class.active]="activeSection === 'account'" (click)="setActiveSection('account')">
                <span>Cuenta</span>
            </button>
            <button class="nav-item" [class.active]="activeSection === 'privacy'" (click)="setActiveSection('privacy')">
                <span>Privacidad</span>
            </button>
            <button class="nav-item" [class.active]="activeSection === 'notifications'"
                (click)="setActiveSection('notifications')">
                <span>Notificaciones</span>
            </button>
            <button class="nav-item" [class.active]="activeSection === 'security'"
                (click)="setActiveSection('security')">
                <span>Seguridad</span>
            </button>
            <button class="nav-item danger" [class.active]="activeSection === 'danger'"
                (click)="setActiveSection('danger')">
                <span>Zona de Peligro</span>
            </button>
        </div>

        <div class="settings-panel">
            <div class="alert alert-success" *ngIf="successMessage">{{ successMessage }}</div>
            <div class="alert alert-error" *ngIf="errorMessage">{{ errorMessage }}</div>

            <div class="section" *ngIf="activeSection === 'account'">
                <h2>Configuración de Cuenta</h2>
                <div class="form-group">
                    <label for="name">Nombre</label>
                    <input type="text" id="name" [(ngModel)]="name" placeholder="Tu nombre" class="form-control">
                </div>
                <div class="form-group">
                    <label for="bio">Biografía</label>
                    <textarea id="bio" [(ngModel)]="bio" placeholder="Cuéntanos sobre ti" class="form-control"
                        rows="4"></textarea>
                </div>
                <button class="btn btn-primary" (click)="updateProfile()">Guardar Cambios</button>
            </div>

            <div class="section" *ngIf="activeSection === 'privacy'">
                <h2>Configuración de Privacidad</h2>
                <div class="form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" [(ngModel)]="isPrivate">
                        <span>Cuenta privada</span>
                    </label>
                    <p class="help-text">Solo tus seguidores podrán ver tus publicaciones</p>
                </div>
                <div class="form-group">
                    <label for="allowComments">¿Quién puede comentar en tus publicaciones?</label>
                    <select id="allowComments" [(ngModel)]="allowCommentsFrom" class="form-control">
                        <option value="everyone">Todos</option>
                        <option value="followers">Solo seguidores</option>
                        <option value="none">Nadie</option>
                    </select>
                </div>
                <button class="btn btn-primary" (click)="updatePrivacy()">Guardar Cambios</button>
            </div>

            <div class="section" *ngIf="activeSection === 'notifications'">
                <h2>Configuración de Notificaciones</h2>
                <div class="form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" [(ngModel)]="emailNotifications">
                        <span>Notificaciones por email</span>
                    </label>
                    <p class="help-text">Recibe actualizaciones por correo electrónico</p>
                </div>
                <div class="form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" [(ngModel)]="pushNotifications">
                        <span>Notificaciones push</span>
                    </label>
                    <p class="help-text">Recibe notificaciones en el navegador</p>
                </div>
                <button class="btn btn-primary" (click)="updateNotifications()">Guardar Cambios</button>
            </div>

            <div class="section" *ngIf="activeSection === 'security'">
                <h2>Seguridad</h2>
                <div class="form-group">
                    <label for="currentPassword">Contraseña Actual</label>
                    <input type="password" id="currentPassword" [(ngModel)]="currentPassword"
                        placeholder="Contraseña actual" class="form-control">
                </div>
                <div class="form-group">
                    <label for="newPassword">Nueva Contraseña</label>
                    <input type="password" id="newPassword" [(ngModel)]="newPassword" placeholder="Nueva contraseña"
                        class="form-control">
                </div>
                <div class="form-group">
                    <label for="confirmPassword">Confirmar Nueva Contraseña</label>
                    <input type="password" id="confirmPassword" [(ngModel)]="newPasswordConfirmation"
                        placeholder="Confirmar nueva contraseña" class="form-control">
                </div>
                <button class="btn btn-primary" (click)="changePassword()">Cambiar Contraseña</button>
            </div>

            <div class="section danger-zone" *ngIf="activeSection === 'danger'">
                <h2>Zona de Peligro</h2>
                <div class="warning-box">
                    <h3>Eliminar Cuenta</h3>
                    <p>Una vez que elimines tu cuenta, no hay vuelta atrás. Por favor, ten cuidado.</p>
                    <div class="form-group">
                        <label for="deletePassword">Confirma tu contraseña para eliminar la cuenta</label>
                        <input type="password" id="deletePassword" [(ngModel)]="deletePassword" placeholder="Contraseña"
                            class="form-control">
                    </div>
                    <button class="btn btn-danger" (click)="deleteAccount()">Eliminar Cuenta Permanentemente</button>
                </div>
            </div>
        </div>
    </div>

    <div class="loading" *ngIf="loading">
        <p>Cargando configuración...</p>
    </div>
</div>